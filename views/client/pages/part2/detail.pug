extends ../../layouts/default
include ../../mixins/box-head

block main 
  input(type="hidden", id="userId", value=loggedInUser.id)
  input(type="hidden", id="topicId", value=topic.id)
  input(type="hidden", id="topicTitle", value=topic.title)
  input(type="hidden", id="topicContent", value=topic.content)

  .container.my-4

    //- Hi·ªÉn th·ªã n·ªôi dung c√¢u h·ªèi (topic.content ch·ª©a suggest)
    .card.border-success.shadow-sm.mb-3
      .card-header.bg-success.text-white
        i.fas.fa-user-tag.me-2
        | #{topic.title}
        div.d-none(id=`text-topic-${topic.id}`) !{topic.title}
      .card-body
        p.mb-0 !{topic.content} 

    //- Ghi √¢m
    p.text-muted.mt-3.mb-1.small
      i.fas.fa-microphone-alt.me-1
      | Ghi √¢m c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n cho c√¢u h·ªèi tr√™n:

    .d-flex.gap-2.flex-wrap.mb-2
      button.btn.btn-sm.btn-outline-success(
        id=`start-btn-${topic.id}`,
        type="button",
        onclick=`startRecording('${topic.id}')`
      ) üéôÔ∏è Ghi √¢m

      button.btn.btn-outline-danger.btn-sm(
        id=`stop-btn-${topic.id}`,
        type="button",
        onclick=`stopRecording('${topic.id}')`,
        disabled
      ) ‚èπÔ∏è D·ª´ng

      button.btn.btn-outline-secondary.btn-sm(
        id=`upload-btn-${topic.id}`,
        type="button",
        onclick=`uploadAudio('${topic.id}')`,
        disabled
      ) ‚¨ÜÔ∏è G·ª≠i

    audio.controls.mt-2.w-100(id=`audio-${topic.id}`)

    //- K·∫øt qu·∫£ ph√°t √¢m (JS s·∫Ω insert v√†o ƒë√¢y)
    div.mt-3(id=`answer-result-${topic.id}`)

block script 
  script(src="/js/part2.js")
