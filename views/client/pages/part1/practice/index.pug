extend ../../../layouts/default
include ../../../mixins/box-head

block main 
  input(type="hidden", id="topicId", value=practice.title)
  input(type="hidden", id="userId", value=loggedInUser.id)
  .container.my-4
    .row 
      .col-12 
        +box-head(pageTitle)
  
    //- List of Questions
    each questionItem, index in practice.questions
      - const questionText = questionItem.text;
      - const questionAudio = questionItem.audio;

      .accordion.mb-3(id=`accordion-${index}`)
        .accordion-item.shadow-sm
          h2.accordion-header
            button.accordion-button.collapsed(
              type="button", 
              data-bs-toggle="collapse", 
              data-bs-target=`#collapse-${index}`
            )
              | üìù C√¢u h·ªèi #{index + 1}

          .accordion-collapse.collapse(id=`collapse-${index}`)
            .accordion-body
              
              //- C√¢u h·ªèi
              .card.border-info
                .card-body
                  h6.text-primary.mb-2
                    i.fas.fa-volume-up.me-1.text-primary(
                      role="button", 
                      onclick=`playAudio('${questionAudio}')`
                    )
                    | C√¢u h·ªèi
                  p.mb-0 !{questionText}
                  div.d-none(id=`text-question-${index}`) !{questionText}



              //- Ghi √¢m
              p.text-muted.mt-2.mb-1.small
                | Ghi √¢m c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n cho c√¢u h·ªèi tr√™n:

              .btn-group.mb-2(role="group")
                button.btn.btn-sm.btn-outline-primary(
                  id=`start-btn-question-${index}`,
                  type="button",
                  onclick=`startRecording('question', ${index})`
                ) üéôÔ∏è Ghi √¢m

                button.btn.btn-sm.btn-outline-danger(
                  id=`stop-btn-question-${index}`,
                  type="button",
                  onclick=`stopRecording('question', ${index})`,
                  disabled
                ) ‚èπÔ∏è D·ª´ng

                button.btn.btn-sm.btn-outline-secondary(
                  id=`upload-btn-question-${index}`,
                  type="button",
                  onclick=`uploadAudioPrac('question', ${index})`,
                  disabled
                ) ‚¨ÜÔ∏è G·ª≠i

              //- Audio preview
              audio.controls.mt-2(id=`question-audio-${index}`)

              //- K·∫øt qu·∫£ ph√°t √¢m v√† hi·ªÉn th·ªã n√∫t g·ª£i √Ω (JS s·∫Ω insert v√†o ƒë√¢y)
              div.mt-3(id=`question-result-${index}`)

block script 
  script(src="/js/part1.js")